{"version":3,"file":"static/webpack/static\\development\\pages\\campaigns\\requests\\new.js.436bebfc47e20a9d9a79.hot-update.js","sources":["webpack:///./pages/campaigns/requests/new.js"],"sourcesContent":["import React, { Component } from \"react\";\r\nimport {\r\n  Card,\r\n  Button,\r\n  Image,\r\n  Header,\r\n  Segment,\r\n  Grid,\r\n  Form,\r\n  Input,\r\n  Dimmer,\r\n  Loader,\r\n  Message\r\n} from \"semantic-ui-react\";\r\nimport Layout from \"../../../components/layout\";\r\nimport web3 from \"../../../ether/web3\";\r\nimport camp_abt from \"../../../ether/build/campaign.json\";\r\nimport { Link } from \"../../../routes\";\r\n\r\nclass New_request extends Component {\r\n  state = {\r\n    total_ether: \"\",\r\n    desc: \"\",\r\n    recp: \"\",\r\n    errormsg: \"\",\r\n    loading: false,\r\n    sucess: true\r\n  };\r\n\r\n  static async getInitialProps(props) {\r\n    //  const address = props.query.address;\r\n    console.log(\"this address is maybe\", props.query.address);\r\n    return { address: props.query.address };\r\n  }\r\n  onSubmit = async event => {\r\n    console.log(\"the address is \", this.props.address);\r\n    event.preventDefault();\r\n    const camp = await new web3.eth.Contract(\r\n      JSON.parse(camp_abt.interface),\r\n      this.props.address\r\n    );\r\n    this.setState({ loading: true, errormsg: \"\" });\r\n    try {\r\n      const account = await web3.eth.getAccounts();\r\n      console.log(\"camps is \", camp.methods.createreq);\r\n      await camp.methods\r\n        .createreq(\r\n          this.state.desc,\r\n          web3.utils.toWei(this.state.total_ether, \"ether\"),\r\n          this.state.recp\r\n        )\r\n        .send({ from: account[0] });\r\n      this.setState({ loading: false, sucess: false });\r\n      console.log(\"the state is \", this.state.loading);\r\n      //Router.pushRoute(\"/\");\r\n    } catch (err) {\r\n      console.log(\"there  main error is\", err);\r\n      this.setState({ errormsg: err.message });\r\n      console.log(\"error message is \", this.state.errormsg);\r\n    }\r\n  };\r\n  render() {\r\n    return (\r\n      <Layout>\r\n        <h1>new request form</h1>\r\n\r\n        <Form onSubmit={this.onSubmit} error={!!this.state.errormsg}>\r\n          <Form.Field>\r\n            <label>Description</label>\r\n            <Input\r\n              value={this.state.desc}\r\n              onChange={event => this.setState({ desc: event.target.value })}\r\n            />\r\n          </Form.Field>\r\n          <Form.Field>\r\n            <label>Ether required </label>\r\n            <Input\r\n              label=\"ether\"\r\n              labelPosition=\"right\"\r\n              value={this.state.total_ether}\r\n              onChange={event =>\r\n                this.setState({ total_ether: event.target.value })\r\n              }\r\n            />\r\n          </Form.Field>\r\n          <Form.Field>\r\n            <label>Recipient address </label>\r\n            <Input\r\n              value={this.state.recp}\r\n              onChange={event => this.setState({ recp: event.target.value })}\r\n            />\r\n          </Form.Field>\r\n          <Form.Field\r\n            id=\"form-button-control-public\"\r\n            control={Button}\r\n            content=\"Create Request\"\r\n            primary\r\n          />\r\n          <Dimmer active={this.state.loading} page>\r\n            <Loader />\r\n            <Header as=\"h2\" icon inverted>\r\n              <p>Processing Transaction</p>\r\n            </Header>\r\n          </Dimmer>\r\n          <Message\r\n            error\r\n            header=\"Oops Something went wrong.Please re try\"\r\n            content={this.state.errormsg}\r\n          />\r\n          <Message positive hidden={this.state.sucess}>\r\n            <Message.Header>Your requested is created </Message.Header>\r\n          </Message>\r\n        </Form>\r\n      </Layout>\r\n    );\r\n  }\r\n}\r\nexport default New_request;\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAaA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AACA;;;;;;AAaA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AACA;AADA;AAGA;AACA;AAGA;AAAA;AAAA;AAAA;AACA;AARA;AAAA;AAAA;AACA;AADA;AASA;AACA;AAVA;AAAA;AAiBA;AAAA;AACA;AAlBA;AAkBA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AApBA;AAAA;AACA;AADA;AAAA;AAAA;AAsBA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAzBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;;AA0BA;AAAA;AACA;AAAA;AAIA;AAAA;AAAA;AAIA;AACA;AAAA;AAAA;AAAA;AAAA;AAFA;AAQA;AACA;AACA;AACA;AAAA;AACA;AAAA;AADA;AAJA;AAYA;AACA;AAAA;AAAA;AAAA;AAAA;AAFA;AAMA;AACA;AACA;AACA;AAJA;AAMA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AAHA;AAKA;AAAA;AAAA;AAMA;;;;;;AAtFA;;;;;AACA;AACA;AACA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;;;AAdA;AACA;AAiGA;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}